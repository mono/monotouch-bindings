BTOUCH=/Developer/MonoTouch/usr/bin/btouch
SMCS=/Developer/MonoTouch/usr/bin/smcs

all: GoogleMaps.dll

GoogleMaps-iOS-1.1.1.zip:
	curl -O https://dl.google.com/geosdk/GoogleMaps-iOS-1.1.1.zip > $@
	unzip $@

GoogleMaps: GoogleMaps-iOS-1.1.1.zip
	cp GoogleMaps-iOS-1.1.1/GoogleMaps.framework/Versions/A/GoogleMaps GoogleMaps

Resources/GoogleMaps.bundle: GoogleMaps-iOS-1.1.1.zip GoogleMaps
	mkdir Resources
	cp -R GoogleMaps-iOS-1.1.1/GoogleMaps.framework/Versions/A/Resources/* Resources/GoogleMaps.bundle

GoogleMaps.dll: Makefile GoogleMaps.linkwith.cs ApiDefinition.cs StructsAndEnums.cs extras.cs GoogleMaps Resources/GoogleMaps.bundle
	-mkdir -p ios
	$(BTOUCH) -unsafe -d:DEBUG ApiDefinition.cs -s:StructsAndEnums.cs -tmpdir:ios -sourceonly:ios/sources.list
	$(SMCS) -noconfig -debug+ -debug:full -optimize- -out:GoogleMaps.dll -resource:Resources/GoogleMaps.bundle/GMSSprites-0.png,__monotouch_content_GoogleMaps.bundle_fGMSSprites-0.png -resource:Resources/GoogleMaps.bundle/GMSSprites-0@2x.png,__monotouch_content_GoogleMaps.bundle_fGMSSprites-0@2x.png -resource:Resources/GoogleMaps.bundle/bubble_left.png,__monotouch_content_GoogleMaps.bundle_fbubble__left.png -resource:Resources/GoogleMaps.bundle/bubble_left@2x.png,__monotouch_content_GoogleMaps.bundle_fbubble__left@2x.png -resource:Resources/GoogleMaps.bundle/bubble_right.png,__monotouch_content_GoogleMaps.bundle_fbubble__right.png -resource:Resources/GoogleMaps.bundle/bubble_right@2x.png,__monotouch_content_GoogleMaps.bundle_fbubble__right@2x.png -resource:Resources/GoogleMaps.bundle/dav_one_way_16_256.png,__monotouch_content_GoogleMaps.bundle_fdav__one__way__16__256.png -resource:Resources/GoogleMaps.bundle/dav_road_32_128.png,__monotouch_content_GoogleMaps.bundle_fdav__road__32__128.png -resource:Resources/GoogleMaps.bundle/dav_road_32_64.png,__monotouch_content_GoogleMaps.bundle_fdav__road__32__64.png -resource:Resources/GoogleMaps.bundle/dav_road_40_128.png,__monotouch_content_GoogleMaps.bundle_fdav__road__40__128.png -resource:Resources/GoogleMaps.bundle/dav_road_44_64.png,__monotouch_content_GoogleMaps.bundle_fdav__road__44__64.png -resource:Resources/GoogleMaps.bundle/dav_road_48_128.png,__monotouch_content_GoogleMaps.bundle_fdav__road__48__128.png -resource:Resources/GoogleMaps.bundle/dav_road_48_64.png,__monotouch_content_GoogleMaps.bundle_fdav__road__48__64.png -resource:Resources/GoogleMaps.bundle/dav_road_56_128.png,__monotouch_content_GoogleMaps.bundle_fdav__road__56__128.png -resource:Resources/GoogleMaps.bundle/dav_road_hybrid_6_32_high_zoom.png,__monotouch_content_GoogleMaps.bundle_fdav__road__hybrid__6__32__high__zoom.png -resource:Resources/GoogleMaps.bundle/dav_road_hybrid_6_32_low_zoom.png,__monotouch_content_GoogleMaps.bundle_fdav__road__hybrid__6__32__low__zoom.png -resource:Resources/GoogleMaps.bundle/default_marker.png,__monotouch_content_GoogleMaps.bundle_fdefault__marker.png -resource:Resources/GoogleMaps.bundle/default_marker@2x.png,__monotouch_content_GoogleMaps.bundle_fdefault__marker@2x.png -resource:Resources/GoogleMaps.bundle/location_dot.png,__monotouch_content_GoogleMaps.bundle_flocation__dot.png -resource:Resources/GoogleMaps.bundle/location_dot@2x.png,__monotouch_content_GoogleMaps.bundle_flocation__dot@2x.png -resource:Resources/GoogleMaps.bundle/logo.png,__monotouch_content_GoogleMaps.bundle_flogo.png -resource:Resources/GoogleMaps.bundle/logo@2x.png,__monotouch_content_GoogleMaps.bundle_flogo@2x.png -resource:Resources/GoogleMaps.bundle/polyline_colors_texture.png,__monotouch_content_GoogleMaps.bundle_fpolyline__colors__texture.png -resource:Resources/GoogleMaps.bundle/polyline_colors_texture@2x.png,__monotouch_content_GoogleMaps.bundle_fpolyline__colors__texture@2x.png -resource:Resources/GoogleMaps.bundle/turn_arrow_background.png,__monotouch_content_GoogleMaps.bundle_fturn__arrow__background.png -resource:Resources/GoogleMaps.bundle/turn_arrow_foreground.png,__monotouch_content_GoogleMaps.bundle_fturn__arrow__foreground.png -resource:Resources/GoogleMaps.bundle/Info.plist,__monotouch_content_GoogleMaps.bundle_fInfo.plist -resource:Resources/GoogleMaps.bundle/GMSCacheStorage.momd/VersionInfo.plist,__monotouch_content_GoogleMaps.bundle_fGMSCacheStorage.momd_fVersionInfo.plist -resource:Resources/GoogleMaps.bundle/ar.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_far.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/ca.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fca.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/cs.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fcs.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/da.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fda.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/de.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fde.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/el.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fel.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/en.lproj/InfoPlist.strings,__monotouch_content_GoogleMaps.bundle_fen.lproj_fInfoPlist.strings -resource:Resources/GoogleMaps.bundle/en.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fen.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/en_GB.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fen__GB.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/es.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fes.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/fi.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_ffi.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/fr.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_ffr.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/he.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fhe.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/hr.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fhr.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/hu.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fhu.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/it.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fit.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/ja.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fja.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/ko.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fko.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/nl.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fnl.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/no.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fno.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/pl.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fpl.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/pt.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fpt.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/pt_PT.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fpt__PT.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/ro.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fro.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/ru.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fru.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/sk.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fsk.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/sv.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fsv.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/th.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fth.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/tr.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_ftr.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/uk.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fuk.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/vi.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fvi.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/zh_CN.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fzh__CN.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/zh_TW.lproj/SDK.strings,__monotouch_content_GoogleMaps.bundle_fzh__TW.lproj_fSDK.strings -resource:Resources/GoogleMaps.bundle/GMSCacheStorage.momd/Storage.mom,__monotouch_content_GoogleMaps.bundle_fGMSCacheStorage.momd_fStorage.mom -resource:Resources/GoogleMaps.bundle/GMSCacheStorage.momd/Storage.omo,__monotouch_content_GoogleMaps.bundle_fGMSCacheStorage.momd_fStorage.omo -resource:GoogleMaps GoogleMaps.linkwith.cs  StructsAndEnums.cs extras.cs @ios/sources.list -target:library -unsafe+  -define:DEBUG -reference:/Developer/MonoTouch/usr/lib/mono/2.1/System.dll -reference:/Developer/MonoTouch/usr/lib/mono/2.1/monotouch.dll -reference:/Developer/MonoTouch/usr/lib/mono/2.1/System.Core.dll

prepare: Resources/GoogleMaps.bundle

clean:
	-rm -rf list ios Resources/ GoogleMaps-iOS-1.1.1/ *.dll *.o *.zip *.mdb GoogleMaps
